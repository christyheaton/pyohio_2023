<!DOCTYPE html>
<html>
<head>
    <title>5 Random Hikes</title>
    <meta charset="UTF-8">
	<link rel="stylesheet" href="https://pyscript.net/releases/2023.11.1/core.css" />
	<script type="module" src="https://pyscript.net/releases/2023.11.1/core.js"></script>
</head>
<body>
  <py-config>
    packages = ["folium", "geopandas", "matplotlib", "mapclassify"]
  </py-config>
<script type="py">
import folium
import pandas as pd
import geopandas as gpd
from pyscript import display
from pyodide.http import open_url

hikes_url = "https://raw.githubusercontent.com/christyheaton/pyohio_2023/main/data/2021-04-25_wta_hike_data_clean.csv"
hike_data = pd.read_csv(open_url(hikes_url))

states_url = "https://raw.githubusercontent.com/christyheaton/pyohio_2023/main/data/USA_States_Generalized.geojson"
states = gpd.read_file(open_url(states_url))

wash = states[states["STATE_NAME"] == "Washington"]

hike_data = hike_data[(hike_data["DISTANCE"] >= 8) & (hike_data["DISTANCE"] <= 20) & (hike_data["DIST_TYPE"] == "roundtrip")].reset_index(drop=True)
hike_data = hike_data[hike_data["RATING"] >= 4].reset_index(drop=True)

hikes_gdf = gpd.GeoDataFrame(hike_data, geometry=gpd.points_from_xy(hike_data.LONGITUDE, hike_data.LATITUDE))
hikes_gdf = hikes_gdf.set_crs("epsg:4326")

sample_hikes = hikes_gdf.sample(n=5)

m = wash.explore(tiles="CartoDB positron", style_kwds={"fill": False})
sample_hikes.explore(m=m, 
                     color="brown",
                     marker_kwds={"radius": 5},
                     tooltip=["TITLE", "DISTANCE", "GAIN"])
display(m)
</script>
</body>
</html>